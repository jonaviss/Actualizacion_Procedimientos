import React, { useState } from 'react';

// Iconos SVG integrados para máxima estabilidad y compatibilidad en cualquier navegador
const Icons = {
  File: () => (
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
  ),
  Search: () => (
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
  ),
  Book: () => (
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
  ),
  Alert: () => (
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
  ),
  Code: () => (
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
  ),
  Shield: () => (
    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
  )
};

const App = () => {
  const [tab, setTab] = useState('ruta'); // 'ruta' o 'normas'
  const [activeStep, setActiveStep] = useState(0);

  const steps = [
    {
      id: "Solicitar Actualización",
      title: "DISI-FO-002: Solicitud de actualización de sistema de información",
      actor: "Ente Rector",
      icon: <Icons.File />,
      color: "bg-blue-600",
      desc: "El Ente Rector formaliza el requerimiento mediante el formato institucional oficial. Es obligatorio haber completado la Línea Base Técnica previo a este paso.",
      tasks: [
        "Llenado técnico del DISI-FO-002: Solicitud de actualización de sistema de información",
        "Justificación de objetivos operativos y beneficios esperados",
        "Obtención de avales de Jefatura y Dirección, autorizados por el Despacho Ministerial"
      ]
    },
    {
      id: "Análisis de Viabilidad Técnica",
      title: "DISI-FO-016: Dictamen Técnico de Viabilidad Integral",
      actor: "Dirección de Sistemas de Información",
      icon: <Icons.Search />,
      color: "bg-emerald-600",
      desc: "La Dirección de Sistemas de Información evalúa la factibilidad técnica del cambio. Se analizan recursos, infraestructura y alineación estratégica.",
      tasks: [
        "Recepción y validación de expediente con DISI-FO-002: Solicitud de actualización de sistema de información y Línea Base Técnica",
        "Dictámenes internos de Infraestructura, Desarrollo y Gestión de Proyectos",
        "Emisión del DISI-FO-016: Dictamen Técnico de Viabilidad Integral"
      ]
    },
    {
      id: "Desarrollo y Actualización",
      title: "Fase de Ejecución y Programación del Sistema",
      actor: "Dirección de Sistemas de Información",
      icon: <Icons.Code />,
      color: "bg-indigo-600",
      desc: "Implementación técnica de los requerimientos. Esta fase solo se activa con un dictamen favorable contenido en el DISI-FO-016: Dictamen Técnico de Viabilidad Integral.",
      tasks: [
        "Programación de los requerimientos técnicos aprobados",
        "Pruebas de calidad y aceptación con el Ente Rector (UAT)",
        "Actualización de manuales por el Ente Rector y salida a producción"
      ]
    }
  ];

  const normas = [
    {
      titulo: "1. Sobre la solicitud",
      items: [
        "Toda solicitud debe contar con aval de jefe de unidad, director o autoridad superior y despacho ministerial.",
        "Debe documentarse únicamente en el formulario DISI-FO-002: Solicitud de actualización de sistema de información.",
        "NORMA 1.C: Debe ir acompañada de los procedimientos formalmente aprobados que sustenten los requerimientos funcionales técnicos."
      ]
    },
    {
      titulo: "2. Priorización y Planificación",
      items: [
        "Las solicitudes serán evaluadas mediante el DISI-FO-016: Dictamen Técnico de Viabilidad Integral conforme a disponibilidad de recursos.",
        "La Dirección de Sistemas de Información se reserva el derecho de calendarizar según su planificación operativa."
      ]
    },
    {
      titulo: "3. Documentación Obligatoria",
      items: [
        "Toda actualización requiere manual de usuario elaborado íntegramente por el Ente Rector.",
        "La gestión de usuarios es responsabilidad única y exclusivamente del Ente Rector solicitante.",
        "El Ente Rector debe mantener actualizados los diagramas, módulos y roles de su plataforma operativa actual."
      ]
    },
    {
      titulo: "4. Capacitación y Soporte",
      items: [
        "La Dirección de Sistemas de Información ofrece capacitación básica sobre los cambios realizados a usuarios clave.",
        "El Ente Rector es responsable de replicar la capacitación a la totalidad de sus usuarios finales."
      ]
    }
  ];

  return (
    <div className="min-h-screen bg-slate-50 text-slate-900 p-4 md:p-8 font-sans">
      <div className="max-w-5xl mx-auto">
        
        {/* Header Institucional */}
        <header className="bg-[#002d57] text-white rounded-3xl p-6 md:p-10 mb-8 shadow-lg border-b-4 border-blue-500">
          <div className="flex flex-col md:flex-row justify-between items-center gap-6 text-center md:text-left">
            <div>
              <h1 className="text-2xl font-black uppercase tracking-tight leading-none mb-1 text-white">Dirección de Sistemas de Información</h1>
              <p className="text-blue-300 text-[10px] font-bold uppercase tracking-[0.2em]">Manual MTPS-DISI-002 | Versión 04</p>
            </div>
            <div className="flex bg-white/10 p-1 rounded-xl shrink-0 border border-white/20">
              <button 
                onClick={() => setTab('ruta')}
                className={`px-4 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${tab === 'ruta' ? 'bg-white text-blue-900 shadow-md' : 'text-blue-200 hover:text-white'}`}
              >
                Ruta Operativa
              </button>
              <button 
                onClick={() => setTab('normas')}
                className={`px-4 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${tab === 'normas' ? 'bg-white text-blue-900 shadow-md' : 'text-blue-200 hover:text-white'}`}
              >
                Normas
              </button>
            </div>
          </div>
        </header>

        {tab === 'ruta' ? (
          <div className="space-y-6">
            {/* Requisito Previo de Línea Base */}
            <div className="bg-white rounded-[2.5rem] border-2 border-blue-600 shadow-xl overflow-hidden mb-10">
              <div className="bg-blue-600 p-6 text-white flex items-center gap-4">
                <div className="bg-white/20 p-3 rounded-2xl shrink-0"><Icons.Book /></div>
                <h2 className="text-xl font-black uppercase tracking-tight">Requisito Obligatorio: Línea Base Técnica</h2>
              </div>
              <div className="p-8">
                <p className="text-gray-700 font-medium mb-6 leading-relaxed text-sm md:text-base">
                  Antes de proceder con cualquier trámite técnico, el <strong>Ente Rector</strong> debe entregar el respaldo documental de su plataforma actual:
                </p>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
                  {[
                    "Diagramas de flujo actuales", 
                    "Procedimientos aprobados", 
                    "Manual de usuario vigente", 
                    "Módulos y roles actuales"
                  ].map((item, i) => (
                    <div key={i} className="flex items-center gap-2 p-3 bg-blue-50 rounded-xl border border-blue-100 transition-transform hover:scale-105">
                      <div className="w-2 h-2 rounded-full bg-blue-600 shrink-0"></div>
                      <span className="text-[10px] font-black text-blue-900 leading-tight uppercase tracking-tighter">{item}</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* Navegación por Pasos Clarificados */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
               {steps.map((step, idx) => (
                 <button 
                    key={idx}
                    onClick={() => setActiveStep(idx)}
                    className={`p-5 rounded-3xl border-2 transition-all text-left flex flex-col gap-3 ${activeStep === idx ? 'bg-white border-blue-600 shadow-lg scale-[1.02]' : 'bg-white border-transparent text-slate-400 hover:border-slate-200'}`}
                 >
                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${activeStep === idx ? step.color + ' text-white shadow-md' : 'bg-slate-100 text-slate-300'}`}>
                       {step.icon}
                    </div>
                    <div>
                      <p className="text-[10px] font-black uppercase tracking-widest opacity-60 mb-1">{step.id}</p>
                      <h3 className="text-xs font-black uppercase leading-tight text-slate-800">
                         Responsable: {step.actor === "Dirección de Sistemas de Información" ? "Dirección Sistemas" : step.actor}
                      </h3>
                    </div>
                 </button>
               ))}
            </div>

            {/* Detalle del Paso Activo */}
            <div className="bg-white rounded-[2.5rem] shadow-2xl border border-gray-200 overflow-hidden transition-all duration-500">
              <div className={`${steps[activeStep].color} p-10 text-white relative overflow-hidden`}>
                 <div className="absolute top-0 right-0 p-6 opacity-10 scale-150">
                    {steps[activeStep].icon}
                 </div>
                 <div className="flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-10">
                    <div>
                      <p className="text-[10px] font-black uppercase tracking-[0.2em] opacity-80 mb-2">Responsable: {steps[activeStep].actor}</p>
                      <h2 className="text-2xl md:text-3xl font-black tracking-tight leading-none uppercase">
                        {steps[activeStep].id}
                      </h2>
                      <div className="mt-4 bg-white/20 px-4 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest w-fit">
                        {steps[activeStep].title.split(':')[0]}
                      </div>
                    </div>
                 </div>
              </div>
              <div className="p-8 md:p-12">
                <p className="text-gray-600 text-base md:text-lg leading-relaxed mb-8 font-medium italic">
                   {steps[activeStep].desc}
                </p>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {steps[activeStep].tasks.map((task, i) => (
                    <div key={i} className="flex items-start gap-4 p-5 bg-gray-50 rounded-2xl border border-gray-100 transition-all hover:border-blue-200 hover:bg-white group">
                      <div className="w-8 h-8 rounded-full bg-white flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-100 shrink-0 group-hover:text-blue-600 group-hover:border-blue-200 shadow-sm transition-colors">{i+1}</div>
                      <span className="text-sm font-bold text-gray-700 leading-tight pt-1 group-hover:text-slate-900">{task}</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* Alerta de Cierre con Nombres Completos */}
            <div className="bg-amber-50 border-2 border-amber-200 rounded-3xl p-6 flex gap-4 shadow-sm items-start">
              <div className="text-amber-500 shrink-0 mt-1"><Icons.Alert /></div>
              <div className="text-amber-800 text-xs md:text-sm font-black leading-relaxed uppercase tracking-tight">
                <p>La Dirección de Sistemas de Información no recepcionará el DISI-FO-002: Solicitud de actualización de sistema de información ni emitirá el DISI-FO-016: Dictamen Técnico de Viabilidad Integral si el Ente Rector no adjunta la documentación de la Línea Base Técnica requerida.</p>
              </div>
            </div>
          </div>
        ) : (
          <div className="space-y-6">
            <h2 className="text-xl font-black text-slate-800 uppercase px-2 mb-6 flex items-center gap-2">
               <Icons.Shield /> Manual de Normas Oficiales
            </h2>
            {normas.map((norma, idx) => (
              <div key={idx} className="bg-white rounded-3xl p-8 md:p-10 border border-gray-200 shadow-sm transition-all hover:border-blue-100">
                <h3 className="font-black text-blue-900 text-xs uppercase mb-6 pb-2 border-b border-gray-100 tracking-[0.2em]">{norma.titulo}</h3>
                <div className="space-y-4">
                  {norma.items.map((item, i) => (
                    <div key={i} className="flex gap-5 items-start">
                      <div className="w-6 h-6 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center text-[10px] font-bold shrink-0 mt-0.5 shadow-inner">{i+1}</div>
                      <p className="text-sm md:text-base text-gray-600 leading-relaxed font-bold">{item}</p>
                    </div>
                  ))}
                </div>
              </div>
            ))}
          </div>
        )}

        <footer className="mt-16 text-center text-gray-400 pb-12">
          <p className="text-[10px] font-black uppercase tracking-[0.5em]">Ministerio de Trabajo y Previsión Social | Guatemala</p>
        </footer>

      </div>
    </div>
  );
};

export default App;

